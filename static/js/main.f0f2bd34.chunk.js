(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(35),s=a.n(c),o=a(6),l=a.n(o),i=a(36),u=a(7),m=a(14),p=a(15),d=a(17),h=a(16),f=a(18),b=a(29),v=a(26),E=a(37),y=a(38);function g(){var e=Object(E.a)(["\n  margin: 10vh 10%;\n"]);return g=function(){return e},e}var k=y.a.div(g()),w=a(139),x=a(132),O=a(138),j=function(e){return r.a.createElement("div",null,r.a.createElement(O.a,null,e.quoteData&&e.portfolio.map((function(t){return r.a.createElement(O.a.Item,{style:{color:e.quoteData.colors[t.ticker]},key:t.latestPrice},t.ticker," - ",t.quantity," shares - $",e.quoteData.today[t.ticker][1])}))))},C=function(e){var t=e.transactions;console.log("transactions: ",t);var a=t.sort((function(e,t){return e.date.seconds-t.date.seconds}));return console.log(t),r.a.createElement("div",null,r.a.createElement(O.a,null,a&&a.map((function(e){var t=e.date,a=e.ticker,n=e.quantity,c=e.total;return r.a.createElement(O.a.Item,{key:t.seconds},a," - ",n," shares @ $",c)}))))},S=a(20),P=a(135),U=a(130),D=a(84),q=a(131),I=a(30),A=a.n(I),L=(a(100),a(104),function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=N.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=18;break}return r=t.displayName,c=t.email,s=new Date,5e3,e.prev=10,e.next=13,n.set(Object(i.a)({displayName:r,balance:5e3,email:c,createdAt:s},a));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.log("Error creating message: ",e.t0.message);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t,a){return e.apply(this,arguments)}}());A.a.initializeApp({apiKey:"AIzaSyB4op2RXRGlOhatncYOSb-HyhuEt2-HT1A",authDomain:"my-stock-portfolio-a6e5e.firebaseapp.com",databaseURL:"https://my-stock-portfolio-a6e5e.firebaseio.com",projectId:"my-stock-portfolio-a6e5e",storageBucket:"my-stock-portfolio-a6e5e.appspot.com",messagingSenderId:"853804645767",appId:"1:853804645767:web:ed54a9d1baacb2688d2722",measurementId:"G-Q40TVKBGR8"});var T=A.a.auth(),N=A.a.firestore(),B=new A.a.auth.GoogleAuthProvider;B.setCustomParameters({prompt:"select_account"});var G=function(){return T.signInWithPopup(B)},F=(A.a,a(83)),R=a.n(F),W=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.a.get("https://cloud.iexapis.com/stable/stock/".concat(t,"/quote?token=pk_605188193e7f43949de64f3be974e5c5"));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getPortfolio currentUser: ",t),a=[],e.next=4,N.collection("users").doc(t.uid).collection("portfolio").get().then((function(e){e.forEach((function(e){a.push(e.data())}))}));case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,N.collection("users").doc(t.id).collection("transactions").get().then((function(e){e.forEach((function(e){a.push(e.data())}))}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ticker,n=t.latestPrice,e.next=3,W(a);case 3:return r=e.sent,c=[parseFloat(r.open)||parseFloat(n),r.latestPrice],s=void 0,s=c[0]>c[1]?"red":c[0]<c[1]?"green":"gray",e.abrupt("return",{ticker:a,latest:c,color:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(a);case 3:return n=e.sent,r={},c={},n.map((function(e){var t=e.ticker,a=e.latest,n=e.color;r[t]=a,c[t]=n})),e.abrupt("return",{today:r,colors:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this))).handleChange=function(e){a.setState(Object(S.a)({},e.target.name,e.target.value))},a.handleTicker=function(e){a.setState({ticker:e.target.name})},a.calculateAmount=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({test:!0,quantity:Math.round(a.state.quantity)}),e.next=4,W(a.state.ticker);case 4:return n=e.sent,a.setState({latestPrice:n.latestPrice.toFixed(2)}),"Request failed with status code 404"===n&&alert("Invalid stock symbol, try another"),a.setState({total:a.state.quantity*n.latestPrice}),e.next=10,a.getCurrentUserData();case 10:if(!(a.state.userData&&a.state.total>a.state.userData.balance)){e.next=12;break}return e.abrupt("return");case 12:a.setState({disabled:!1});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r,c,s,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.userData,r=n.displayName,c=n.email,s=n.createdAt,o=n.balance,e.next=4,T.currentUser;case 4:return i=e.sent,a.props.currentUser&&N.collection("users").doc(i.uid).set({displayName:r,email:c,createdAt:s,balance:(o-a.state.total).toFixed(2)}),u=new Set,e.next=9,N.collection("users").doc(i.uid).collection("portfolio").get().then((function(e){console.log("Query snap shot: ",e),e.forEach((function(e){var t=e.data(),n=e.id,r=t.quantity;u.add(t.ticker),t.ticker===a.state.ticker&&N.collection("users").doc(i.uid).collection("portfolio").doc(n).set({ticker:a.state.ticker,quantity:a.state.quantity+r,latestPrice:a.state.latestPrice})}))}));case 9:if(e.sent,u.has(a.state.ticker)){e.next=13;break}return e.next=13,N.collection("users").doc(i.uid).collection("portfolio").add({ticker:a.state.ticker,quantity:a.state.quantity,latestPrice:a.state.latestPrice});case 13:return e.next=15,N.collection("users").doc(i.uid).collection("transactions").add({ticker:a.state.ticker,quantity:a.state.quantity,total:a.state.total.toFixed(2),latestPrice:a.state.latestPrice,date:(new Date).toUTCString()});case 15:a.setState({ticker:"",quantity:null,total:0,userData:a.state.userData,test:!1,disabled:!0,latestPrice:"",openPrice:""});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getCurrentUserData=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.currentUser;case 2:return t=e.sent,e.next=5,N.doc("users/".concat(t.uid));case 5:return n=e.sent,e.next=8,n.onSnapshot((function(e){a.setState({userData:e.data()})}));case 8:case"end":return e.stop()}}),e)}))),a.state={ticker:"",quantity:null,total:0,userData:null,test:!1,disabled:!0,latestPrice:"",openPrice:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.getCurrentUserData()}},{key:"render",value:function(){var e=this.state,t=e.userData,a=e.total;return r.a.createElement("div",null,r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("h2",null,"Your balance is $",this.state.userData&&this.state.userData.balance),r.a.createElement("br",null),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(U.a.Prepend,null,r.a.createElement(U.a.Text,null,"Ticker Symbol")),r.a.createElement(D.a,{onChange:this.handleChange,name:"ticker",value:this.state.ticker,placeholder:"Choose a Ticker Symbol. (Ex. AAPL for Apple)","aria-label":"Ticker Symbol"})),r.a.createElement("br",null),r.a.createElement(U.a,{className:"mb-3"},r.a.createElement(U.a.Prepend,null,r.a.createElement(U.a.Text,null,"Number of Shares")),r.a.createElement(D.a,{onChange:this.handleChange,name:"quantity",value:this.state.quantity,placeholder:"Type in how many shares you want to buy, whole numbers please","aria-label":"Amount (to the nearest dollar)"})),r.a.createElement("br",null),r.a.createElement(q.a,{type:"input",onClick:this.calculateAmount},"Calculate"),this.state&&this.state.test?r.a.createElement(q.a,{disabled:!(!this.state||!this.state.disabled),style:{marginLeft:"20px"},type:"submit"},"Buy"):null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"$".concat(this.state.total.toFixed(2))),t&&t.balance<a?r.a.createElement("div",{style:{color:"red"}},"Your total is more than your balance"):null))}}]),t}(r.a.Component),Q=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={colors:null,todaysPrices:null},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.portfolio,a=e.transactions,n=e.currentUser,c=e.quoteData,s=e.handleChange;return console.log("Portfolio in tabs: ",t),r.a.createElement(w.a,{onClick:this.getTodaysQuote,defaultActiveKey:"buy",id:"uncontrolled-tab-example"},r.a.createElement(x.a,{eventKey:"portfolio",title:"Portfolio"},r.a.createElement(j,{portfolio:t,quoteData:c})),r.a.createElement(x.a,{eventKey:"transactions",title:"Transactions"},r.a.createElement(C,{transactions:a})),r.a.createElement(x.a,{eventKey:"buy",title:"Buy"},r.a.createElement(Y,{currentUser:n,handle:s})))}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={portfolio:[],transactions:[],currentUser:null,quoteData:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props||!this.props.currentUser){e.next=13;break}return e.next=3,K(this.props.currentUser);case 3:return t=e.sent,console.log("portfolio - ",t),e.next=7,M(this.props.currentUser);case 7:return a=e.sent,e.next=10,$(t);case 10:n=e.sent,console.log("quoteData - ",n),this.setState({portfolio:t,transactions:a,currentUser:this.props.currentUser,quoteData:n});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(k,null,this.state&&this.state.portfolio&&this.state.transactions&&this.state.currentUser?r.a.createElement(Q,{portfolio:this.state.portfolio,transactions:this.state.transactions,currentUser:this.state.currentUser,quoteData:this.state.quoteData}):null)}}]),t}(r.a.Component);function H(){var e=Object(E.a)(["\n  margin-top: 20vh;\n"]);return H=function(){return e},e}var J=y.a.div(H()),_=a(133),V=a(134),X=a(85),Z=a(137),ee=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).handleChange=function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(S.a)({},a.target.name,a.target.value));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r,c,s,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("RegisterForm props: ",e.props),n=e.state,r=n.displayName,c=n.email,s=n.password,o=n.confirmPassword,s===o){t.next=6;break}return alert("Passwords don't match"),t.abrupt("return");case 6:return t.prev=6,t.next=9,T.createUserWithEmailAndPassword(c,s);case 9:i=t.sent,u=i.user,L(u,{displayName:r,balance:5e3}),e.setState({registered:!0}),console.log("Registered: ",e.state.registered),e.setState({displayName:"",email:"",password:"",confirmPassword:""}),e.props.history.push("/"),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),console.log(t.t0.message),e.setState({error:t.t0.message});case 22:case"end":return t.stop()}}),t,null,[[6,18]])})));return function(e){return t.apply(this,arguments)}}(),e.state={displayName:"",email:"",password:"",confirmPassword:"",registered:!1,error:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement(P.a.Group,{controlId:"formBasicName"},r.a.createElement(P.a.Label,null,"Username"),r.a.createElement(P.a.Control,{type:"text",name:"displayName",onChange:this.handleChange,value:this.state.username,placeholder:"Enter username"}),r.a.createElement(P.a.Text,{className:"text-muted"},"This name will be used as your profile name")),r.a.createElement(P.a.Group,{controlId:"formBasicEmail"},r.a.createElement(P.a.Label,null,"Email address"),r.a.createElement(P.a.Control,{type:"email",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:"Enter email"}),r.a.createElement(P.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{style:{color:"red"}},this.state.error),r.a.createElement(P.a.Group,{controlId:"formBasicPassword"},r.a.createElement(P.a.Label,null,"Password"),r.a.createElement(P.a.Control,{type:"password",name:"password",onChange:this.handleChange,value:this.state.password,placeholder:"Password"})),r.a.createElement(P.a.Group,{controlId:"formBasicPassword"},r.a.createElement(P.a.Label,null,"Confirm Password"),r.a.createElement(P.a.Control,{type:"password",name:"confirmPassword",onChange:this.handleChange,value:this.state.confirmPassword,placeholder:"Retype your password"})),this.state.registered?r.a.createElement(q.a,{variant:"secondary"},"Sign In"):r.a.createElement(q.a,{variant:"primary",type:"submit"},"Register"))}}]),t}(r.a.Component),te=Object(v.g)(ee),ae=function(){return r.a.createElement(_.a,null,r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Body,null,r.a.createElement(Z.a.Title,null,"Register"),r.a.createElement("br",null),r.a.createElement(te,null),r.a.createElement("br",null),r.a.createElement(Z.a.Link,{href:"/"},"Already a User?"),r.a.createElement(q.a,{onClick:G,style:{marginLeft:"20px"}},"Sign Up With Google"))))))},ne=function(){return r.a.createElement(J,null,r.a.createElement(ae,null))},re=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).handleChange=function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(S.a)({},a.target.name,a.target.value));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSubmit=function(){var t=Object(u.a)(l.a.mark((function t(a){var n,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,c=n.email,s=n.password,t.prev=2,t.next=5,T.signInWithEmailAndPassword(c,s);case 5:return e.setState({email:"",password:""}),t.abrupt("return",r.a.createElement(v.a,{to:"dashboard"}));case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.abrupt("return",r.a.createElement(v.a,{to:"/"}));case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e.state={email:"",password:""},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,{onSubmit:this.handleSubmit},r.a.createElement(P.a.Group,{controlId:"formBasicEmail"},r.a.createElement(P.a.Label,null,"Email address"),r.a.createElement(P.a.Control,{type:"email",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:"Enter email"}),r.a.createElement(P.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(P.a.Group,{controlId:"formBasicPassword"},r.a.createElement(P.a.Label,null,"Password"),r.a.createElement(P.a.Control,{type:"password",name:"password",onChange:this.handleChange,value:this.state.password,placeholder:"Password"})),r.a.createElement(q.a,{variant:"primary",type:"submit"},"Submit"))}}]),t}(r.a.Component),ce=function(){return r.a.createElement(_.a,null,r.a.createElement(V.a,null,r.a.createElement(X.a,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Body,null,r.a.createElement(Z.a.Title,null," Sign In"),r.a.createElement("br",null),r.a.createElement(re,null),r.a.createElement("br",null),r.a.createElement(Z.a.Link,{href:"/register"},"Register as a User"),r.a.createElement(q.a,{onClick:G,style:{marginLeft:"20px"}},"Sign In With Google"))))))},se=function(){return r.a.createElement(J,null,r.a.createElement(ce,null))},oe=a(136),le=a(86),ie=function(e){var t=e.currentUser;return r.a.createElement(oe.a,{bg:"primary",variant:"dark"},r.a.createElement(oe.a.Brand,{href:"/dashboard"},"My Stock Portfolio"),r.a.createElement(le.a,{className:"mr-auto"},r.a.createElement(le.a.Link,{href:"#"}),r.a.createElement(le.a.Link,{href:"#features"},"Features"),r.a.createElement(le.a.Link,{href:"#pricing"},"Pricing")),r.a.createElement(le.a,null,t?r.a.createElement("div",null,r.a.createElement(le.a.Link,{href:"#",onClick:function(){return T.signOut()}},"Sign Out")):r.a.createElement("div",null,r.a.createElement(le.a.Link,{href:"/"},"Sign In"))))},ue=function(e){var t=e.children,a=e.currentUser;return r.a.createElement("div",null,r.a.createElement(ie,{currentUser:a}),r.a.createElement("div",null,t))},me=a(52),pe=function(e){var t=e.component,a=e.loggedIn,n=e.path,c=Object(me.a)(e,["component","loggedIn","path"]);return r.a.createElement(v.b,Object.assign({path:n},c,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:"/",state:{prevLocation:n,error:"You need to sign in first!"}}})}}))},de=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var c=Object.assign.apply(Object,[{}].concat(a));return r.a.createElement(e,c)},he=function(e){var t=e.component,a=Object(me.a)(e,["component"]);return r.a.createElement(v.b,Object.assign({},a,{render:function(e){return de(t,e,a)}}))},fe=(a(127),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).unsubscribeFromAuth=null,e.state={currentUser:null,firebaseUser:null},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromAuth=T.onAuthStateChanged(function(){var t=Object(u.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,L(a);case 3:t.sent.onSnapshot((function(t){e.setState({currentUser:Object(i.a)({id:t.id},t.data())})}));case 5:e.setState({currentUser:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this.state,t=e.currentUser;e.firebaseUser;return r.a.createElement(b.a,null,r.a.createElement(v.d,null,r.a.createElement(ue,{currentUser:t},r.a.createElement(he,{exact:!0,path:"/",currentUser:t,component:t?z:se}),r.a.createElement(pe,{exact:!0,path:"/dashboard",loggedIn:t,component:z}),r.a.createElement(v.b,{exact:!0,path:"/register",component:t?z:ne}))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,a){e.exports=a(128)}},[[90,1,2]]]);
//# sourceMappingURL=main.f0f2bd34.chunk.js.map